<!--
  Generated template for the OccupiedPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header no-border>
    <ion-navbar color="primary">
      <button ion-button menuToggle>
        <ion-icon name="menu"></ion-icon>
      </button>
      <ion-title>Occupied Spaces</ion-title>
    </ion-navbar>
  </ion-header>

<ion-content padding>
    <ion-grid>
      <ion-row>
        <ion-col col-5>
          <ion-card class="summary">
            <ion-card-header>
              <ion-grid>
                <ion-row>
                  <ion-col col-8>
                      <h1>No. of Occupied Spaces</h1>
                  </ion-col>
                  <ion-col col-2>   
                      <h1>{{ percentOccupied | number: 0 }}%</h1>
                  </ion-col>
                </ion-row>
              </ion-grid>
            </ion-card-header>
            <ion-card-content>
              <canvas #summaryCanvas></canvas>
            </ion-card-content>
          </ion-card>   
        </ion-col>
        <ion-col col-5>
          <ion-card>
            <ion-card-header>
              <h1>Wrong Parkings</h1>
            </ion-card-header>
            <ion-card-content>
              <canvas #misParkCanvas></canvas>
              <button ion-button clear (click)="viewDetails()">View details</button>
            </ion-card-content>            
          </ion-card>          
        </ion-col>
      </ion-row>
    </ion-grid>
    <ion-card>
      <ion-card-content>
        <div class="parkingChart">
          <ion-toolbar color="white">
            <ion-segment color="primary">
              <ion-segment-button name="all" value="all" (click)="viewAll()" >All</ion-segment-button>
              <ion-segment-button name="available" value="available" (click)="viewAvailable()">Available</ion-segment-button>
              <ion-segment-button value="occupied" (click)="viewOccupied()">Occupied</ion-segment-button>
            </ion-segment>
          </ion-toolbar>
          <div class="parkingChart">
              <ion-grid margin-left="20px;">
              <ion-row class="spaceGrid">
                <ion-col col-2 class="display" *ngFor="let space of allSpaces">
                    <ion-chip color="{{ space.value }}">
                        <ion-label>{{ space.id }}</ion-label>
                    </ion-chip>
                </ion-col>
              </ion-row>
            </ion-grid>
          </div>
          </div>
      </ion-card-content>
    </ion-card>
    <ion-grid class="occupiedGrid" color="primary">
      <ion-row class="rowHeader">
        <ion-col class="colHeader" col-2>
          <strong>Reservation ID</strong>
        </ion-col>
        <ion-col class="colHeader" col-2>
          <strong>User</strong>
        </ion-col>
        <ion-col class="colHeader" col-1>
          <strong>Space</strong>
        </ion-col>
        <ion-col class="colHeader" col-1>
          <strong>Start</strong>
        </ion-col>
        <ion-col class="colHeader" col-1>
          <strong>End</strong>
        </ion-col>
        <ion-col class="colHeader" col-1>
          <strong>Fee</strong>
        </ion-col>
        <ion-col class="colHeader" col-2>
          <strong>Confirm Payment</strong>
        </ion-col>
      </ion-row>
      <ion-row class="occupiedRow" *ngFor="let space of occupiedSpaces">
          <ion-col col-2 class="occupiedCol">
            {{ space.id }}
          </ion-col>
          <ion-col col-2 class="occupiedCol">
            {{ space.value.user }}
          </ion-col>
          <ion-col col-1 class="occupiedCol">
            {{ space.value.space }}
          </ion-col>
          <ion-col col-1 class="occupiedCol">
            {{ space.value.start }}
          </ion-col>
          <ion-col col-1 class="occupiedCol">
            {{ space.value.end }}
          </ion-col>
          <ion-col col-1 class="occupiedCol">
            P{{ space.value.fee | number: 0 }}
          </ion-col>
          <ion-col col-2 class="occupiedCol">
            <button ion-button clear small outline color="primary" (click)="confirmPayment(space)">Paid</button>
          </ion-col>
      </ion-row>
      
    </ion-grid>
</ion-content>
